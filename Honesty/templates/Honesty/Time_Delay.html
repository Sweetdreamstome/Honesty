{% block title %}
    Time Delay
{% endblock %}

{% block content %}

<head>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        #clock {
            font-size: 35px;
            text-align: center;
            font-weight: bold;
        }

        #text {
            text-align: center;
            font-size: 25px;
            font-weight: bold;
        }

        .otree-body {
        max-width:900px
    }

    </style>
</head>

<body onload="startTimer('clock')">

<div class="card bg-light" id = 'container' style='color:rgb(146, 3, 3)'>
    <p id = 'text'>Tiempo restante</p> 
    <p id="clock" role="timer" aria-live="off">10</p>
</div>

<table class ='table'>
    <thead>
        <th>Ronda</th>
        <th>Sexo de tu pareja</th>
        <th>Grupo Asignado</th>
    </thead>
    <thbody>
        <tr>
            <td>{{ player.round_number }} </td>
            <td> {{ sexo_pareja }} </td>
            <td> {{ grupo_asignado }} </td>
        </tr>
    </thbody>
</table>


<div class="d-grid gap-2 d-md-block">
    <p>Fuiste asignado al grupo....... </p>
    <button class="btn btn-primary" id = 'A' type = 'button'>A</button>
    <button class="btn btn-primary" id = 'B' type = 'button'>B</button>
</div>


<input id = 'decision' name = 'decision' hidden>

<br>
<br>

<p id = "off" style='color:red;font-weight: bold;' hidden>Ya pasaron los 10 segundos, por favor darle click a "Siguiente" </p>
<button id = "boton" class="otree-btn-next btn btn-primary" hidden>Siguiente</button>

    <script>
      
    function startTimer(timerName) 
    {
  
    let timer = document.getElementById(timerName),
       seconds = parseInt(timer.innerText);
  
    timer.innerText = --seconds
    
        if (seconds) 
        {
        setTimeout( function() 
            {
            startTimer(timerName);
            }, 1000);
        }
    }

    document.getElementById("A").addEventListener("click", function(){
        document.getElementById('B').disabled = false;
        this.disabled = true;
        document.getElementById('decision').value = 'A'

    });

    document.getElementById("B").addEventListener("click", function(){
        document.getElementById('A').disabled = false;
        this.disabled = true;
        document.getElementById('decision').value = 'B';
    
    });

    setTimeout(
        function () 
        {
            document.getElementById('off').removeAttribute('hidden');
            document.getElementById('boton').removeAttribute('hidden');
        },
        10*1000 
    );

    setTimeout(
        function () 
        {
            alert("Ya sobrepaso el tiempo establecido , por favor tome una decision y dele click a Siguiente");
        },
        20*1000 
    );
        </script>
</body>
{% endblock %}